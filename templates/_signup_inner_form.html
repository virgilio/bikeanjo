{% load i18n socialaccount %}
{% providers_media_js %}

<header>
    <h2>{% trans "Cadastre-se agora!" %}</h2>
    <p>{% trans "Junte-se a uma comunidade que acredita na transformação por meio da bicicleta" %}</p>
</header>

<form class="signup card" id="signup_form" method="post" {% if action %}action="{% url action %}"{% endif %}>
    {% csrf_token %}

    {% if form.errors and debug %}
    <div class="errors">
        <ul>{{ form.errors }}</ul>
    </div>
    {% endif %}

    {% if request.session.user_role == 'bikeanjo' %}
    <input type="hidden" name="next" value="{% url 'bikeanjo_account_signup_complete' %}" />
    {% endif %}

    {% if request.session.user_role == 'requester' %}
    <input type="hidden" name="next" value="{% url 'requester_account_signup_complete' %}" />
    {% endif %}

    {% if not sociallogin and not form.instance.id %}
    <fieldset>
        <legend>{% trans "Crie sua conta usando" %}</legend>
        {# include "socialaccount/snippets/provider_list.html" with process="login" #}
        <div class="login-social">
            {% for provider in socialaccount.providers reversed %}
             <a title="{{provider.name}}" class="{{provider.id}} btn btn-default" 
                href="{% provider_login_url provider.id process=process scope=scope auth_params=auth_params %}"
                ><i class="fa fa-{{provider.id}}"></i>{{provider.name}}</a>
            {% endfor %}
        </div>
    </fieldset>
    {% endif %}

    <fieldset {% if sociallogin or form.instance.id %}style="border:none"{% endif %}>
        {% if not sociallogin and not form.instance.id %}
        <legend>{% trans "ou crie uma conta com seu e-mail" %}</legend>
        {% endif %}
        <div class="form-group {% if form.full_name.errors %}has-error has-feedback{% endif %}">
            <label class="primary-label" for="{{ form.full_name.id_for_label }}">{{ form.full_name.label }}</label>
            <input class="form-control" type="text" name="{{ form.full_name.html_name }}" id="{{ form.full_name.id_for_label }}" value="{{ form.full_name.value|default:"" }}" placeholder="Seu nome completo">
            <i class="fa fa-user form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.full_name.errors %}
                {% for error in form.full_name.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>

        <div class="form-group {% if form.email.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
            <input class="form-control" type="email" name="{{ form.email.html_name }}" id="{{ form.email.id_for_label }}" value="{{ form.email.value|default:"" }}" placeholder="{% trans 'Digite seu e-mail' %}">
            <i class="fa fa-envelope-o form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.email.errors %}
                {% for error in form.email.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>

        <div class="form-group {% if form.email2.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.email2.id_for_label }}">{{ form.email2.label }}</label>
            <input class="form-control" type="email2" name="{{ form.email2.html_name }}" id="{{ form.email2.id_for_label }}" value="{{ form.email2.value|default:"" }}" placeholder="{% trans 'Digite seu e-mail novamente' %}">
            <i class="fa fa-envelope-o form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.email2.errors %}
                {% for error in form.email2.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>

        <div class="form-group {% if form.country.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.country.id_for_label }}">{{ form.country.label }}</label>
            <input class="form-control" type="text" name="{{ form.country.html_name }}" id="{{ form.country.id_for_label }}" value="{{ form.country.value|default:"Brasil" }}" placeholder="O nome do seu país">
            <i class="fa fa-globe form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.country.errors %}
                {% for error in form.country.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>

        <div class="form-group {% if form.city.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.city.id_for_label }}">{{ form.city.label }}</label>

            <input class="form-control" type="text" autocomplete="off"
                   name="{{ form.city.html_name }}"
                   id="{{ form.city.id_for_label }}" value="{{ form.city.value|default:"" }}"
                   placeholder="O nome da sua cidade"
                   suggests="/api/cities" suggests-json-key="name"
                   suggests-filter-key="state__country__name"
                   suggests-filter-value="#{{ form.country.id_for_label }}">

            <i class="fa fa-home form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.city.errors %}
                {% for error in form.city.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>

        {% if form.password1 %}
        <div class="form-group {% if form.password1.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.password1.id_for_label }}">{{ form.password1.label }}</label>
            <input class="form-control" type="password" name="{{ form.password1.html_name }}" id="{{ form.password1.id_for_label }}" value="{{ form.password1.value|default:"" }}" placeholder="Digite sua senha">
            <i class="fa fa-lock form-control-icon"></i>
                <i class="fa fa-times form-control-feedback"></i>
            {% if form.password1.errors %}
                {% for error in form.password1.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>
        {% endif %}

        {% if form.password2 %}
        <div class="form-group {% if form.password2.errors %}has-error{% endif %}">
            <label class="primary-label" for="{{ form.password2.id_for_label }}">{{ form.password2.label }}</label>
            <input class="form-control" type="password" name="{{ form.password2.html_name }}" id="{{ form.password2.id_for_label }}" value="{{ form.password2.value|default:"" }}" placeholder="Confirme sua senha">
            <i class="fa fa-lock form-control-icon"></i>
            <i class="fa fa-times form-control-feedback"></i>
            {% if form.password2.errors %}
                {% for error in form.password2.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            {% endif %}
        </div>
        {% endif %}
    </fieldset>

    <button class="send-form btn btn-primary btn-block btn-lg" type="submit">{% trans "Cadastre-se" %}</button>
    <p class="create-account">{% trans "Já faz parte?" %} <a href="{{ login_url }}">{% trans "Faça o login" %}</a></p>

</form>

<p class="questions"><a href="#"><i class="fa fa-question-circle"></i>
<i class="fa fa-times form-control-feedback"></i>
        {% trans "Problemas ou Dúvidas?" %} <b>{% trans "Fale com a gente!" %}</b></a></p>
